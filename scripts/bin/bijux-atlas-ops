#!/usr/bin/env bash
# Purpose: human-friendly ops CLI shim that delegates to canonical Make targets.
# Inputs: subcommand and optional make-style VAR=value args.
# Outputs: executes mapped `make ops-*` target and returns target exit code.
set -euo pipefail
ROOT="$(CDPATH= cd -- "$(dirname -- "$0")/../.." && pwd)"
cd "$ROOT"
. "$ROOT/scripts/lib/errors.sh"

if [ "${1:-}" = "" ] || [ "${1:-}" = "help" ] || [ "${1:-}" = "--help" ]; then
  exec make ops-help
fi

cmd="$1"
shift || true

case "$cmd" in
  stack-up) exec make ops-stack-up "$@" ;;
  stack-down) exec make ops-stack-down "$@" ;;
  obs-up) exec make ops-obs-up "$@" ;;
  obs-verify) exec make ops-obs-verify "$@" ;;
  datasets-verify) exec make ops-datasets-verify "$@" ;;
  e2e-smoke) exec make ops-e2e-smoke "$@" ;;
  k8s-suite) exec make ops-k8s-suite "$@" ;;
  load-suite) exec make ops-load-suite "$@" ;;
  lint) exec make ops-lint "$@" ;;
  fmt) exec make ops-fmt "$@" ;;
  *) err "OPS_UNKNOWN_COMMAND" "unknown ops command: $cmd (use: scripts/bin/bijux-atlas-ops help)"; exit 2 ;;
esac
