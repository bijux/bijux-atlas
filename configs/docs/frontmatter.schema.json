{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://bijux.dev/schemas/docs/frontmatter.schema.json",
  "title": "Docs frontmatter",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "title",
    "audience",
    "type",
    "stability"
  ],
  "properties": {
    "title": {
      "type": "string",
      "minLength": 1
    },
    "audience": {
      "type": "string",
      "enum": ["user", "operator", "contributor"]
    },
    "type": {
      "type": "string",
      "enum": ["concept", "how-to", "reference", "runbook", "adr", "faq", "internal"]
    },
    "stability": {
      "type": "string",
      "enum": ["draft", "stable", "deprecated"]
    },
    "owner": {
      "type": "string",
      "minLength": 1
    },
    "last_reviewed": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "tags": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "minLength": 1
      }
    },
    "related": {
      "type": "array",
      "minItems": 2,
      "items": {
        "type": "string",
        "minLength": 1
      }
    },
    "internal": {
      "type": "boolean"
    },
    "verification": {
      "type": "boolean"
    },
    "source": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1
      }
    },
    "ssot": {
      "type": "string",
      "minLength": 1
    },
    "adr_id": {
      "type": "string",
      "minLength": 1
    },
    "replaced_by": {
      "type": "string",
      "minLength": 1
    },
    "prerequisites": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1
      }
    },
    "estimated_time": {
      "type": "string",
      "minLength": 1
    },
    "severity": {
      "type": "string",
      "minLength": 1
    },
    "oncall_role": {
      "type": "string",
      "minLength": 1
    },
    "rollback_available": {
      "type": "boolean"
    },
    "extensions": {
      "type": "object"
    }
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "stability": {
            "const": "stable"
          }
        },
        "required": ["stability"]
      },
      "then": {
        "required": ["owner", "last_reviewed", "tags", "related"]
      }
    },
    {
      "if": {
        "properties": {
          "type": {
            "enum": ["how-to", "runbook"]
          }
        },
        "required": ["type"]
      },
      "then": {
        "required": ["verification"]
      }
    },
    {
      "if": {
        "properties": {
          "type": {
            "const": "reference"
          }
        },
        "required": ["type"]
      },
      "then": {
        "required": ["source"]
      }
    },
    {
      "if": {
        "properties": {
          "type": {
            "const": "internal"
          }
        },
        "required": ["type"]
      },
      "then": {
        "required": ["internal"]
      }
    }
  ]
}
