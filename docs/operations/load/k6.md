# Atlas Load Harness (k6)

Deterministic load suites for nightly performance gating.

## Run

```bash
BASE_URL=http://127.0.0.1:18080 k6 run load/k6/suites/mixed_80_20.js
```

## Reproducibility

- Fixed endpoint/query set in `load/k6/queries/pinned-v1.json`
- Suite scenarios:
  - `mixed_80_20.js`
  - `warm_steady.js`
  - `spike_burst.js`
  - `cache_stampede.js`
  - `store_outage_mid_spike.js`
  - `soak_30m.js`
  - `regional_spike_10x_60s.js`
  - `mixed_gene_sequence.js`
  - `diff_heavy.js`
  - `noisy_neighbor_cpu_throttle.js`
- Threshold assertions are parameterized but pinned in `configs/perf/thresholds.json`.

## Full Nightly Harness

```bash
./scripts/perf/run_nightly_perf.sh
```

Outputs:
- `artifacts/perf/results/*.summary.json`
- `artifacts/perf/baseline.json`
- `artifacts/perf/report.md`

Policy:
- `docs/observability/perf-regression-policy.md`
