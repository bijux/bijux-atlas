{
  "schema_version": 1,
  "type": "gc_policy",
  "required": [
    "store_root",
    "retention",
    "pins"
  ],
  "properties": {
    "store_root": {
      "type": "string",
      "description": "Canonical artifact store root that GC is allowed to touch."
    },
    "retention": {
      "type": "object",
      "required": [
        "default_window_days",
        "catalog_reachable_protected"
      ],
      "properties": {
        "default_window_days": {
          "type": "integer",
          "minimum": 0
        },
        "catalog_reachable_protected": {
          "type": "boolean"
        }
      }
    },
    "pins": {
      "type": "object",
      "required": [
        "dataset_ids",
        "artifact_hashes"
      ],
      "properties": {
        "dataset_ids": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^release=[A-Za-z0-9._-]+&species=[A-Za-z0-9._-]+&assembly=[A-Za-z0-9._-]+$"
          }
        },
        "artifact_hashes": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[A-Fa-f0-9]{64}$"
          }
        }
      }
    }
  }
}
