{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "atlasctl.check-run.v1",
  "type": "object",
  "required": [
    "schema_name",
    "schema_version",
    "tool",
    "kind",
    "run_id",
    "status",
    "summary",
    "rows"
  ],
  "properties": {
    "schema_name": {"const": "atlasctl.check-run.v1"},
    "schema_version": {"const": 1},
    "tool": {"const": "atlasctl"},
    "kind": {"enum": ["check-run", "check-run-report"]},
    "run_id": {"type": "string", "minLength": 1},
    "status": {"enum": ["ok", "error"]},
    "summary": {
      "type": "object",
      "required": ["passed", "failed", "skipped", "total", "duration_ms"],
      "properties": {
        "passed": {"type": "integer", "minimum": 0},
        "failed": {"type": "integer", "minimum": 0},
        "skipped": {"type": "integer", "minimum": 0},
        "total": {"type": "integer", "minimum": 0},
        "duration_ms": {"type": "integer", "minimum": 0}
      },
      "additionalProperties": true
    },
    "rows": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "id",
          "domain",
          "status",
          "duration_ms",
          "reason",
          "hints",
          "owners",
          "artifacts"
        ],
        "properties": {
          "id": {"type": "string", "minLength": 1},
          "title": {"type": "string"},
          "domain": {"type": "string", "minLength": 1},
          "status": {"enum": ["PASS", "FAIL", "SKIP"]},
          "duration_ms": {"type": "integer", "minimum": 0},
          "reason": {"type": "string"},
          "hints": {"type": "array", "items": {"type": "string"}},
          "owners": {"type": "array", "items": {"type": "string"}},
          "artifacts": {"type": "array", "items": {"type": "string"}}
        },
        "additionalProperties": true
      }
    }
  },
  "additionalProperties": true
}
