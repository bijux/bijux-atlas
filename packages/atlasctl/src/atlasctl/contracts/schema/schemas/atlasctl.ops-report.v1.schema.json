{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "atlasctl.ops-report.v1",
  "type": "object",
  "required": [
    "schema_version",
    "tool",
    "run_id",
    "status",
    "started_at",
    "ended_at",
    "checks",
    "failed_count",
    "relaxed_count",
    "total_count"
  ],
  "properties": {
    "schema_version": { "const": 1 },
    "tool": { "type": "string", "minLength": 1 },
    "run_id": { "type": "string", "minLength": 1 },
    "status": { "enum": ["pass", "fail"] },
    "started_at": { "type": "string", "minLength": 1 },
    "ended_at": { "type": "string", "minLength": 1 },
    "failed_count": { "type": "integer", "minimum": 0 },
    "relaxed_count": { "type": "integer", "minimum": 0 },
    "total_count": { "type": "integer", "minimum": 0 },
    "checks": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "description", "status", "command", "actionable"],
        "properties": {
          "id": { "type": "string", "minLength": 1 },
          "description": { "type": "string", "minLength": 1 },
          "status": { "enum": ["pass", "fail", "relaxed"] },
          "command": { "type": "string" },
          "actionable": { "type": "string" },
          "error": { "type": "string" },
          "relaxation": { "type": "object" }
        },
        "additionalProperties": true
      }
    }
  },
  "additionalProperties": true
}
