schema_version = 1

[tags]
vocabulary = ["ops", "repo", "docs", "make", "lint", "internal", "fast", "slow"]

[[checks]]
id = "ops_surface_manifest"
domain = "ops"
title = "ops surface manifest consistency"
docs = "ops/CONTRACT.md"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_tree_contract"
domain = "ops"
title = "ops contract files are present"
docs = "ops/CONTRACT.md"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_no_legacy_tooling_refs"
domain = "ops"
title = "ops does not reference legacy tooling paths"
docs = "ops/CONTRACT.md"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_generated_readonly_markers"
domain = "ops"
title = "ops generated files keep readonly generator markers"
docs = "ops/_generated.example/MIRROR_POLICY.md"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_schema_presence"
domain = "ops"
title = "ops schema baseline is present"
docs = "ops/schema/README.md"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_manifest_integrity"
domain = "ops"
title = "ops inventory manifests are valid json with required keys"
docs = "ops/inventory/README.md"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_surface_inventory"
domain = "ops"
title = "ops index inventories top-level surfaces"
docs = "ops/INDEX.md"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_artifacts_not_tracked"
domain = "ops"
title = "ops evidence paths stay empty in repository"
docs = "ops/CONTRACT.md"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_no_python_legacy_runtime_refs"
domain = "ops"
title = "dev atlas crates do not reference python atlasctl runtime"
docs = "docs/development/tooling/atlasctl.md"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_no_legacy_runner_paths"
domain = "ops"
title = "dev atlas crates do not reference legacy runner path conventions"
docs = "docs/development/scripts.md"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_makefile_routes_dev_atlas"
domain = "ops"
title = "ops makefile routes through dev atlas command surface"
docs = "makefiles/ops.mk"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_workflow_routes_dev_atlas"
domain = "ops"
title = "atlas dev workflow avoids atlasctl ops routes"
docs = ".github/workflows/atlas-dev-rust.yml"
tags = ["ops", "fast"]
suites = ["ops_fast", "all_fast", "ci"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "repo_import_boundary"
domain = "repo"
title = "repo import boundary contracts"
docs = "docs/INDEX.md"
tags = ["repo", "lint", "fast"]
suites = ["repo_fast", "all_fast"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "docs_index_links"
domain = "docs"
title = "docs index links must resolve"
docs = "docs/INDEX.md"
tags = ["docs", "fast"]
suites = ["docs_fast", "all_fast"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "make_wrapper_commands"
domain = "make"
title = "make wrapper commands stay canonical"
docs = "makefiles/CONTRACT.md"
tags = ["make", "fast"]
suites = ["make_fast", "all_fast"]
effects_required = ["fs_read"]
budget_ms = 1000
visibility = "public"

[[checks]]
id = "ops_internal_registry_consistency"
domain = "ops"
title = "ops internal registry consistency"
docs = "ops/CONTRACT.md"
tags = ["ops", "internal", "slow"]
suites = ["ops_all"]
effects_required = ["fs_read", "git"]
budget_ms = 4000
visibility = "internal"

[[suites]]
id = "all_fast"
checks = []
domains = ["ops", "repo", "docs", "make"]
tags_any = ["fast"]

[[suites]]
id = "ops_fast"
checks = [
  "ops_surface_manifest",
  "ops_tree_contract",
  "ops_no_legacy_tooling_refs",
  "ops_generated_readonly_markers",
  "ops_schema_presence",
  "ops_manifest_integrity",
  "ops_surface_inventory",
  "ops_artifacts_not_tracked",
  "ops_no_python_legacy_runtime_refs",
  "ops_no_legacy_runner_paths",
  "ops_makefile_routes_dev_atlas",
  "ops_workflow_routes_dev_atlas",
]
domains = ["ops"]
tags_any = ["fast"]

[[suites]]
id = "ops_all"
checks = []
domains = ["ops"]
tags_any = []

[[suites]]
id = "repo_fast"
checks = []
domains = ["repo"]
tags_any = ["fast"]

[[suites]]
id = "docs_fast"
checks = []
domains = ["docs"]
tags_any = ["fast"]

[[suites]]
id = "make_fast"
checks = []
domains = ["make"]
tags_any = ["fast"]

[[suites]]
id = "ci"
checks = [
  "ops_surface_manifest",
  "ops_tree_contract",
  "ops_no_legacy_tooling_refs",
  "ops_generated_readonly_markers",
  "ops_schema_presence",
  "ops_manifest_integrity",
  "ops_surface_inventory",
  "ops_artifacts_not_tracked",
  "ops_makefile_routes_dev_atlas",
  "ops_workflow_routes_dev_atlas",
]
domains = []
tags_any = []

[[suites]]
id = "ci_fast"
checks = [
  "ops_surface_manifest",
  "ops_tree_contract",
  "ops_no_legacy_tooling_refs",
  "ops_generated_readonly_markers",
  "ops_schema_presence",
  "ops_manifest_integrity",
  "ops_surface_inventory",
  "ops_artifacts_not_tracked",
  "ops_makefile_routes_dev_atlas",
  "ops_workflow_routes_dev_atlas",
  "repo_import_boundary",
  "docs_index_links",
  "make_wrapper_commands",
]
domains = []
tags_any = []
