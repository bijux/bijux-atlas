{
  "schema_version": 1,
  "suites": [
    {
      "id": "smoke",
      "description": "Fast e2e API and observability smoke.",
      "required_capabilities": ["k8s", "stack"],
      "scenarios": [
        {
          "id": "api-smoke",
          "description": "Run canonical API smoke queries and emit smoke report.",
          "runner": "python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/runtime/smoke_queries.py && python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/smoke/generate_report.py",
          "capabilities": ["stack"],
          "destructive": false,
          "budget": {
            "expected_time_seconds": 180,
            "expected_qps": 5,
            "expected_artifacts": [
              "artifacts/evidence/e2e-smoke",
              "ops/_generated.example/report.unified.json"
            ]
          }
        },
        {
          "id": "metrics-smoke",
          "description": "Validate metrics contract against running stack.",
          "runner": "python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/runtime/verify_metrics.py",
          "capabilities": ["observe"],
          "destructive": false,
          "budget": {
            "expected_time_seconds": 120,
            "expected_qps": 1,
            "expected_artifacts": [
              "artifacts/ops/observe"
            ]
          }
        }
      ]
    },
    {
      "id": "k8s-suite",
      "description": "Run Kubernetes invariant suite through canonical runner.",
      "required_capabilities": ["k8s", "stack"],
      "scenarios": [
        {
          "id": "k8s-contract-suite",
          "description": "Execute k8s test suite with selected suite id.",
          "runner": "bin/bijux-dev-atlas run ./crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/k8s/tests/run_suite.py --suite ${ATLAS_E2E_K8S_SUITE:-smoke}",
          "capabilities": ["k8s", "stack"],
          "destructive": false,
          "budget": {
            "expected_time_seconds": 600,
            "expected_qps": 1,
            "expected_artifacts": [
              "artifacts/atlas-dev/ops/k8s/test-results.json",
              "artifacts/atlas-dev/ops/k8s/test-results.xml"
            ]
          }
        }
      ]
    },
    {
      "id": "realdata",
      "description": "Run realdata scenarios and drills in deterministic order.",
      "required_capabilities": ["k8s", "stack", "datasets"],
      "scenarios": [
        {
          "id": "single-release",
          "description": "Validate canonical single release workflow.",
          "runner": "python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/realdata/run_single_release.py",
          "capabilities": ["datasets", "stack"],
          "destructive": false,
          "budget": {
            "expected_time_seconds": 300,
            "expected_qps": 3,
            "expected_artifacts": [
              "artifacts/ops/e2e/realdata"
            ]
          }
        },
        {
          "id": "two-release-diff",
          "description": "Validate two-release diff behavior.",
          "runner": "python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/realdata/run_two_release_diff.py",
          "capabilities": ["datasets", "stack"],
          "destructive": false,
          "budget": {
            "expected_time_seconds": 360,
            "expected_qps": 2,
            "expected_artifacts": [
              "artifacts/ops/release-diff"
            ]
          }
        },
        {
          "id": "schema-evolution",
          "description": "Run schema evolution compatibility drill.",
          "runner": "python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/realdata/schema_evolution.py",
          "capabilities": ["datasets"],
          "destructive": true,
          "budget": {
            "expected_time_seconds": 180,
            "expected_qps": 1,
            "expected_artifacts": [
              "artifacts/ops/e2e/realdata"
            ]
          }
        },
        {
          "id": "upgrade-drill",
          "description": "Run upgrade drill against realdata fixtures.",
          "runner": "python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/realdata/upgrade_drill.py",
          "capabilities": ["datasets", "observe"],
          "destructive": true,
          "budget": {
            "expected_time_seconds": 240,
            "expected_qps": 1,
            "expected_artifacts": [
              "artifacts/ops/e2e/realdata"
            ]
          }
        },
        {
          "id": "rollback-drill",
          "description": "Run rollback drill against realdata fixtures.",
          "runner": "python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/realdata/rollback_drill.py",
          "capabilities": ["datasets", "observe"],
          "destructive": true,
          "budget": {
            "expected_time_seconds": 240,
            "expected_qps": 1,
            "expected_artifacts": [
              "artifacts/ops/e2e/realdata"
            ]
          }
        }
      ]
    },
    {
      "id": "fixture-medium",
      "description": "Medium fixture pipeline: ingest, serve, query smoke, and stable snapshots.",
      "required_capabilities": ["k8s", "stack", "datasets"],
      "scenarios": [
        {
          "id": "single-release-medium",
          "description": "Run single release fixture ingest/serve/query/snapshot workflow.",
          "runner": "python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/realdata/run_single_release.py",
          "capabilities": ["datasets", "stack"],
          "destructive": false,
          "budget": {
            "expected_time_seconds": 420,
            "expected_qps": 3,
            "expected_artifacts": [
              "artifacts/ops/e2e/realdata/single-release/report.json",
              "artifacts/ops/e2e/realdata/single-release/report.md",
              "artifacts/ops/e2e/realdata"
            ]
          }
        }
      ]
    },
    {
      "id": "release-diff-fixture",
      "description": "Serve release110 and release111 fixtures and verify diff endpoints.",
      "required_capabilities": ["k8s", "stack", "datasets"],
      "scenarios": [
        {
          "id": "release110-vs-111-diff",
          "description": "Run realdata release diff validation for canonical endpoints.",
          "runner": "python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/realdata/run_two_release_diff.py",
          "capabilities": ["datasets", "stack"],
          "destructive": false,
          "budget": {
            "expected_time_seconds": 480,
            "expected_qps": 2,
            "expected_artifacts": [
              "artifacts/ops/release-diff/report.json",
              "artifacts/ops/release-diff/report.md",
              "artifacts/ops/release-diff"
            ]
          }
        }
      ]
    },
    {
      "id": "rollback-drill",
      "description": "Rollback drill suite with deterministic report outputs.",
      "required_capabilities": ["k8s", "stack", "datasets", "observe"],
      "scenarios": [
        {
          "id": "realdata-rollback-drill",
          "description": "Run rollback drill and emit deterministic drill report artifacts.",
          "runner": "python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/realdata/rollback_drill.py",
          "capabilities": ["datasets", "observe"],
          "destructive": true,
          "budget": {
            "expected_time_seconds": 300,
            "expected_qps": 1,
            "expected_artifacts": [
              "artifacts/ops/e2e/realdata/rollback-drill/report.json",
              "artifacts/ops/e2e/realdata/rollback-drill/report.md"
            ]
          }
        }
      ]
    },
    {
      "id": "upgrade-drill",
      "description": "Upgrade drill suite verifying schema evolution rules with deterministic reports.",
      "required_capabilities": ["k8s", "stack", "datasets", "observe"],
      "scenarios": [
        {
          "id": "realdata-upgrade-drill",
          "description": "Run upgrade drill and verify schema evolution with report artifacts.",
          "runner": "python3 crates/bijux-dev-atlas/src/bijux-dev-atlas/commands/ops/e2e/realdata/upgrade_drill.py",
          "capabilities": ["datasets", "observe"],
          "destructive": true,
          "budget": {
            "expected_time_seconds": 300,
            "expected_qps": 1,
            "expected_artifacts": [
              "artifacts/ops/e2e/realdata/upgrade-drill/report.json",
              "artifacts/ops/e2e/realdata/upgrade-drill/report.md"
            ]
          }
        }
      ]
    }
  ]
}
