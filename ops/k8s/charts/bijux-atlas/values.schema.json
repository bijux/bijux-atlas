{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "allOf": [
    {
      "if": {
        "properties": {
          "hpa": {
            "properties": {
              "enabled": {
                "const": true
              }
            }
          }
        },
        "required": [
          "hpa"
        ]
      },
      "then": {
        "properties": {
          "metrics": {
            "properties": {
              "customMetrics": {
                "properties": {
                  "enabled": {
                    "const": true
                  }
                },
                "required": [
                  "enabled"
                ]
              }
            },
            "required": [
              "customMetrics"
            ]
          }
        },
        "required": [
          "metrics"
        ]
      }
    }
  ],
  "properties": {
    "affinity": {
      "description": "Chart values key `affinity` from SSOT contract."
    },
    "alertRules": {
      "description": "Chart values key `alertRules` from SSOT contract."
    },
    "cache": {
      "description": "Chart values key `cache` from SSOT contract."
    },
    "catalog": {
      "description": "Chart values key `catalog` from SSOT contract."
    },
    "catalogPublishJob": {
      "description": "Chart values key `catalogPublishJob` from SSOT contract."
    },
    "concurrency": {
      "description": "Chart values key `concurrency` from SSOT contract."
    },
    "datasetWarmupJob": {
      "description": "Chart values key `datasetWarmupJob` from SSOT contract."
    },
    "extraEnv": {
      "description": "Chart values key `extraEnv` from SSOT contract."
    },
    "hpa": {
      "additionalProperties": true,
      "properties": {
        "behavior": {
          "additionalProperties": true,
          "properties": {
            "scaleDown": {
              "additionalProperties": true,
              "properties": {
                "policies": {
                  "items": {
                    "type": "object"
                  },
                  "minItems": 1,
                  "type": "array"
                }
              },
              "required": [
                "policies"
              ],
              "type": "object"
            },
            "scaleUp": {
              "additionalProperties": true,
              "properties": {
                "policies": {
                  "items": {
                    "type": "object"
                  },
                  "minItems": 1,
                  "type": "array"
                }
              },
              "required": [
                "policies"
              ],
              "type": "object"
            }
          },
          "required": [
            "scaleUp",
            "scaleDown"
          ],
          "type": "object"
        },
        "cpuUtilization": {
          "maximum": 100,
          "minimum": 1,
          "type": "integer"
        },
        "enabled": {
          "type": "boolean"
        },
        "maxReplicas": {
          "minimum": 1,
          "type": "integer"
        },
        "minReplicas": {
          "minimum": 1,
          "type": "integer"
        }
      },
      "required": [
        "enabled",
        "minReplicas",
        "maxReplicas",
        "cpuUtilization",
        "behavior"
      ],
      "type": "object"
    },
    "image": {
      "description": "Chart values key `image` from SSOT contract."
    },
    "ingress": {
      "description": "Chart values key `ingress` from SSOT contract."
    },
    "metrics": {
      "additionalProperties": true,
      "properties": {
        "customMetrics": {
          "additionalProperties": true,
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "requiredPodAnnotations": {
              "additionalProperties": {
                "type": "string"
              },
              "minProperties": 1,
              "type": "object"
            }
          },
          "required": [
            "enabled",
            "requiredPodAnnotations"
          ],
          "type": "object"
        }
      },
      "required": [
        "customMetrics"
      ],
      "type": "object"
    },
    "networkPolicy": {
      "description": "Chart values key `networkPolicy` from SSOT contract."
    },
    "nodeLocalSsdProfile": {
      "description": "Chart values key `nodeLocalSsdProfile` from SSOT contract."
    },
    "nodeSelector": {
      "description": "Chart values key `nodeSelector` from SSOT contract."
    },
    "pdb": {
      "description": "Chart values key `pdb` from SSOT contract."
    },
    "podSecurityContext": {
      "description": "Chart values key `podSecurityContext` from SSOT contract."
    },
    "priorityClassName": {
      "description": "Chart values key `priorityClassName` from SSOT contract."
    },
    "rateLimits": {
      "description": "Chart values key `rateLimits` from SSOT contract."
    },
    "replicaCount": {
      "description": "Chart values key `replicaCount` from SSOT contract."
    },
    "resources": {
      "additionalProperties": true,
      "properties": {
        "limits": {
          "additionalProperties": true,
          "properties": {
            "cpu": {
              "minLength": 1,
              "type": "string"
            },
            "ephemeral-storage": {
              "minLength": 1,
              "type": "string"
            },
            "memory": {
              "minLength": 1,
              "type": "string"
            }
          },
          "required": [
            "cpu",
            "memory"
          ],
          "type": "object"
        },
        "requests": {
          "additionalProperties": true,
          "properties": {
            "cpu": {
              "minLength": 1,
              "type": "string"
            },
            "ephemeral-storage": {
              "minLength": 1,
              "type": "string"
            },
            "memory": {
              "minLength": 1,
              "type": "string"
            }
          },
          "required": [
            "cpu",
            "memory"
          ],
          "type": "object"
        }
      },
      "required": [
        "requests",
        "limits"
      ],
      "type": "object"
    },
    "rollout": {
      "description": "Chart values key `rollout` from SSOT contract."
    },
    "securityContext": {
      "description": "Chart values key `securityContext` from SSOT contract."
    },
    "sequenceRateLimits": {
      "description": "Chart values key `sequenceRateLimits` from SSOT contract."
    },
    "server": {
      "additionalProperties": true,
      "properties": {
        "configSchemaVersion": {
          "minLength": 1,
          "type": "string"
        },
        "readinessProbePath": {
          "minLength": 1,
          "type": "string"
        },
        "startupProbePath": {
          "minLength": 1,
          "type": "string"
        }
      },
      "required": [
        "configSchemaVersion",
        "readinessProbePath",
        "startupProbePath"
      ],
      "type": "object"
    },
    "service": {
      "description": "Chart values key `service` from SSOT contract."
    },
    "serviceMonitor": {
      "description": "Chart values key `serviceMonitor` from SSOT contract."
    },
    "store": {
      "description": "Chart values key `store` from SSOT contract."
    },
    "terminationGracePeriodSeconds": {
      "description": "Chart values key `terminationGracePeriodSeconds` from SSOT contract."
    },
    "tolerations": {
      "description": "Chart values key `tolerations` from SSOT contract."
    }
  },
  "title": "bijux-atlas chart values",
  "type": "object"
}
