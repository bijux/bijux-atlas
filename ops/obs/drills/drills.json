{
  "schema_version": 1,
  "drills": [
    {
      "name": "store-outage-under-load",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/store_outage_under_load.py",
      "purpose": "Simulate store outage during active load and validate graceful degradation.",
      "expected_signals": [
        "metric:bijux_store_breaker_open",
        "log:store_outage",
        "trace:error"
      ],
      "runbook": "docs/operations/runbooks/store-outage.md",
      "timeout_seconds": 180,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": true
    },
    {
      "name": "prom-outage",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/prom_outage.py",
      "purpose": "Ensure Prometheus outage does not impact atlas serving behavior.",
      "expected_signals": [
        "metric:bijux_http_requests_total",
        "log:prom_outage"
      ],
      "runbook": "docs/operations/runbooks/traffic-spike.md",
      "timeout_seconds": 180,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": true
    },
    {
      "name": "otel-outage",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/otel_outage.py",
      "purpose": "Ensure OTEL outage degrades traces only and serving remains available.",
      "expected_signals": [
        "metric:bijux_http_requests_total",
        "log:otel_outage",
        "trace:error"
      ],
      "runbook": "docs/operations/observability/otel-outage-behavior.md",
      "timeout_seconds": 180,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": true
    },
    {
      "name": "store-latency-injection",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/store_latency_injection.py",
      "purpose": "Inject store latency and validate breaker and resilience metrics.",
      "expected_signals": [
        "metric:bijux_store_breaker_open",
        "log:store_latency"
      ],
      "runbook": "docs/operations/runbooks/store-outage.md",
      "timeout_seconds": 180,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": true
    },
    {
      "name": "overload-admission-control",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/overload_admission_control.py",
      "purpose": "Drive heavy request and verify admission control/shed signals.",
      "expected_signals": [
        "metric:atlas_overload_active",
        "metric:atlas_shed_total",
        "log:policy_rejection"
      ],
      "runbook": "docs/operations/runbooks/traffic-spike.md",
      "timeout_seconds": 180,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": true
    },
    {
      "name": "log-schema-violation-injection",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/log_schema_violation_injection.py",
      "purpose": "Inject invalid log line and ensure schema validator catches it.",
      "expected_signals": [
        "validator:log_schema_failure"
      ],
      "runbook": "docs/operations/observability/compatibility.md",
      "timeout_seconds": 60,
      "parallel_policy": "serial",
      "warmup": false,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "metric-cardinality-blowup-attempt",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/metric_cardinality_blowup_attempt.py",
      "purpose": "Inject high-cardinality metric labels and ensure guard check fails.",
      "expected_signals": [
        "validator:metric_cardinality_failure"
      ],
      "runbook": "docs/operations/observability/metric-cardinality-guardrails.md",
      "timeout_seconds": 60,
      "parallel_policy": "serial",
      "warmup": false,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "trace-missing-spans-regression",
      "script": "ops/obs/scripts/trace-missing-spans-regression.sh",
      "purpose": "Ensure trace contract catches missing span regression.",
      "expected_signals": [
        "validator:trace_coverage_failure"
      ],
      "runbook": "docs/operations/observability/tracing.md",
      "timeout_seconds": 60,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "alert-firing-proof",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/alert_firing_proof.py",
      "purpose": "Simulate alert condition checks and confirm alert rules exist.",
      "expected_signals": [
        "validator:alerts_contract"
      ],
      "runbook": "docs/operations/observability/alerts.md",
      "timeout_seconds": 120,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "runbook-proof-top5",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/runbook_proof_top5.py",
      "purpose": "Run representative drills and verify top runbook mapping.",
      "expected_signals": [
        "validator:runbook_mapping"
      ],
      "runbook": "docs/operations/runbooks/INDEX.md",
      "timeout_seconds": 300,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "cheap-endpoint-survival",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/cheap_endpoint_survival.py",
      "purpose": "Prove cheap endpoint survives overload and is observable.",
      "expected_signals": [
        "metric:bijux_cheap_queries_served_while_overloaded_total"
      ],
      "runbook": "docs/operations/runbooks/traffic-spike.md",
      "timeout_seconds": 120,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "cache-stampede",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/cache_stampede.py",
      "purpose": "Exercise cache stampede handling and observe singleflight/cache metrics.",
      "expected_signals": [
        "metric:bijux_dataset_cache_misses_total"
      ],
      "runbook": "docs/operations/runbooks/profile-under-load.md",
      "timeout_seconds": 120,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "registry-refresh-failure",
      "script": "ops/obs/scripts/registry-refresh-failure.sh",
      "purpose": "Validate registry/catalog refresh failure behavior and readiness semantics.",
      "expected_signals": [
        "validator:readiness_catalog_refresh"
      ],
      "runbook": "docs/operations/runbooks/registry-federation.md",
      "timeout_seconds": 240,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "dataset-corruption-detection",
      "script": "ops/obs/scripts/dataset-corruption-detection.sh",
      "purpose": "Validate corrupted dataset is detected and quarantined.",
      "expected_signals": [
        "validator:dataset_corruption"
      ],
      "runbook": "docs/operations/runbooks/dataset-corruption.md",
      "timeout_seconds": 240,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "gc-under-load",
      "script": "ops/obs/scripts/gc-under-load.sh",
      "purpose": "Run GC while service is active and confirm no critical disruption.",
      "expected_signals": [
        "validator:gc_under_load"
      ],
      "runbook": "docs/operations/runbooks/incident-playbook.md",
      "timeout_seconds": 240,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "rolling-restart-no-downtime",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/rolling_restart_no_downtime.py",
      "purpose": "Validate rolling restart availability with observability evidence.",
      "expected_signals": [
        "validator:rolling_restart"
      ],
      "runbook": "docs/operations/runbooks/pod-churn.md",
      "timeout_seconds": 300,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "hpa-scale-event",
      "script": "ops/obs/scripts/hpa-scale-event.sh",
      "purpose": "Validate HPA scale event under load and recovery.",
      "expected_signals": [
        "validator:hpa_scale"
      ],
      "runbook": "docs/operations/runbooks/k8s-perf-chaos.md",
      "timeout_seconds": 300,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "node-disk-pressure",
      "script": "ops/obs/scripts/node-disk-pressure.sh",
      "purpose": "Validate node disk pressure scenario and continued service health.",
      "expected_signals": [
        "validator:disk_pressure"
      ],
      "runbook": "docs/operations/runbooks/high-memory.md",
      "timeout_seconds": 300,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "cpu-throttle-noisy-neighbor",
      "script": "ops/obs/scripts/cpu-throttle-noisy-neighbor.sh",
      "purpose": "Validate noisy-neighbor CPU throttle resilience.",
      "expected_signals": [
        "validator:cpu_throttle"
      ],
      "runbook": "docs/operations/runbooks/k8s-perf-chaos.md",
      "timeout_seconds": 300,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "dashboard-fault-signature",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/dashboard_fault_signature.py",
      "purpose": "Confirm dashboards expose expected signatures during injected faults.",
      "expected_signals": [
        "validator:dashboard_contract"
      ],
      "runbook": "docs/operations/observability/dashboard.md",
      "timeout_seconds": 120,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    },
    {
      "name": "alerts-runbook-id-map",
      "script": "packages/atlasctl/src/atlasctl/commands/ops/observability/drills/alerts_runbook_id_map.py",
      "purpose": "Confirm alert rules map to valid runbook identifiers.",
      "expected_signals": [
        "validator:alerts_runbook_map"
      ],
      "runbook": "docs/operations/observability/runbook-dashboard-alert-map.md",
      "timeout_seconds": 120,
      "parallel_policy": "serial",
      "warmup": true,
      "cleanup": true,
      "outage_matrix": false
    }
  ]
}
